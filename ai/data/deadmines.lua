
import 'ai/common_encounter.lua'

t_dungeons[36] = {
	-- Line 1
	{
		{-16.4, -383.07, 61.78, -1000, 2}, -- 1
		{-26.1555, -375.319, 60.3275, -1000, 2}, -- 2
		{-43.9264, -376.603, 55.2085, -1000, 2}, -- 3
		{-65.5829, -382.109, 53.6471, -1000, 2}, -- 4
		{-88.611, -375.439, 57.7628, -1000, 2}, -- 5
		{-103.8, -378.833, 57.5499, -1000, 2}, -- 6
		{-127.183, -407, 58.0145, -1000, 2}, -- 7
		{-159.935, -396.913, 56.5595, -1000, 2}, -- 8
		{-170.441, -401.389, 57.2391, -1000, 2}, -- 9
		{-193.801, -435.429, 53.2826, -1000, 2}, -- 10
		{-188.102, -478.203, 54.0466, -1000, 2}, -- 11
		{-186.383, -499.517, 53.1732, -1000, 2}, -- 12
		{-207.871, -506.911, 51.481, -1000, 2}, -- 13
		{-235.032, -481.044, 49.2043, -1000, 2}, -- 14
		{-278.116, -483.001, 48.8291, -1000, 2}, -- 15
		{-287.726, -500.641, 50.1175, -1000, 2}, -- 16
		{-291.644, -566.754, 49.0597, -1000, 2}, -- 17
		{-308.654, -595.099, 48.3034, -1000, 2}, -- 18
		{-292.916, -603.224, 47.5938, -1000, 2}, -- 19
		{-279.969, -593.298, 50.7994, -1000, 2}, -- 20
		{-268.382, -578.676, 50.3003, -1000, 2}, -- 21
		{-232.557, -578.613, 51.2285, -1000, 2}, -- 22
		{-214.732, -553.214, 51.2293, -1000, 2}, -- 23
		{-189.936, -557.522, 51.2293, -1000, 2}, -- 24
		{-179.902, -579.131, 45.9568, -1000, 2}, -- 25
		{-188.938, -599.881, 36.6453, -1000, 2}, -- 26
		{-217.319, -603.891, 24.7828, -1000, 2}, -- 27
		{-230.998, -587.056, 19.3065, -1000, 2}, -- 28
		{-210.814, -565.549, 20.9768, -1000, 2}, -- 29
		{-167.148, -580.71, 19.3148, -1000, 2}, -- 30
		{-138.146, -577.233, 18.4272, -1000, 2}, -- 31
		{-129.899, -616.259, 13.622, -1000, 2}, -- 32
		{-122.743, -638.561, 12.6966, -1000, 2}, -- 33
		{-103.088, -653.849, 7.42373, -1000, 2}, -- 34
		{-96.6342, -722.279, 8.41762, -1000, 2}, -- 35
		{-68.3707, -732.438, 8.16803, -1000, 2}, -- 36
		{-32.2285, -728.534, 8.50594, -1000, 2}, -- 37
		{-15.5443, -738.193, 8.87578, -1000, 2}, -- 38
		{0.152937, -760.738, 9.49872, -1000, 2}, -- 39
		{-1.85389, -781.085, 9.99277, -1000, 2}, -- 40
		{-25.5496, -798.862, 19.3693, -1000, 2}, -- 41
		{-43.0923, -786.109, 18.5584, -1000, 2}, -- 42
		{-67.9329, -781.223, 17.6831, -1000, 2}, -- 43
		{-95.0613, -787.018, 17.1065, -1000, 2}, -- 44
		{-117.431, -798.629, 16.8742, -1000, 2}, -- 45
		{-127.44, -791.812, 17.1719, -1000, 2}, -- 46
		{-112.269, -785.797, 17.296, -1000, 2}, -- 47
		{-88.2134, -776.316, 26.6485, -1000, 2}, -- 48
		{-79.2224, -782.878, 26.4947, -1000, 2}, -- 49
		{-103.96, -792.337, 28.1831, -1000, 2}, -- 50
		{-98.3984, -804.418, 30.7106, -1000, 2}, -- 51
		{-75.1393, -793.063, 38.7807, -1000, 2}, -- 52
		{-55.5092, -790.161, 38.8652, -1000, 2}, -- 53
		{-40.9005, -796.099, 39.3508, -1000, 2}, -- 54
		{-49.4243, -807.708, 42.5773, -1000, 2}, -- 55
		{-67.4403, -818.93, 40.8462, -1000, 2}, -- 56
		{-83.031, -819.941, 39.5401, -1000, 2}, -- 57
	},
	-- Line 2
	{
		{-55.7807, -388.474, 54.0447, -1000, 2}, -- 1
		{-70.9865, -406.074, 55.0811, -1000, 2}, -- 2
	},
	-- Line 3
	{
		{-57.3183, -372.804, 54.6446, -1000, 2}, -- 1
		{-63.6598, -351.114, 55.6567, -1000, 2}, -- 2
	},
	-- Line 4
	{
		{-105.416, -387.686, 57.204, -1000, 2}, -- 1
		{-93.304, -400.316, 57.9337, -1000, 2}, -- 2
	},
	-- Line 5
	{
		{-124.779, -410.742, 57.8709, -1000, 2}, -- 1
		{-110.849, -433.647, 55.1564, -1000, 2}, -- 2
	},
	-- Line 6
	{
		{-183.592, -501.102, 53.4817, -1000, 2}, -- 1
		{-157.956, -510.358, 53.236, -1000, 2}, -- 2
		{-153.621, -522.186, 52.0971, -1000, 2}, -- 3
		{-152.36, -533.074, 49.5422, -1000, 2}, -- 4
	},
	-- Line 7
	{
		{-126.106, -616.645, 13.3732, -1000, 2}, -- 1
		{-106.049, -616.792, 14.163, -1000, 2}, -- 2
	},
	-- Line 8
	{
		{-22.7817, -803.634, 19.5136, -1000, 2}, -- 1
		{-15.2679, -817.333, 19.9485, -1000, 2}, -- 2
		{-21.17, -833.784, 19.6268, -1000, 2}, -- 3
		{-38.6415, -850.952, 18.7872, -1000, 2}, -- 4
		{-63.0153, -857.296, 17.2361, -1000, 2}, -- 5
		{-90.5316, -853.829, 17.1921, -1000, 2}, -- 6
		{-112.875, -842.084, 16.9311, -1000, 2}, -- 7
		{-121.71, -833.438, 16.9239, -1000, 2}, -- 8
		{-123.356, -826.573, 16.916, -1000, 2}, -- 9
	},
	-- Line 9
	{
		{-46.6953, -831.526, 42.8664, -1000, 2}, -- 1
		{-64.7619, -833.72, 41.1764, -1000, 2}, -- 2
		{-91.7317, -830.771, 38.8823, -1000, 2}, -- 3
		{-102.1, -824.411, 38.1046, -1000, 2}, -- 4
		{-102.47, -814.859, 38.0667, -1000, 2}, -- 5
		{-92.9084, -809.031, 38.7599, -1000, 2}, -- 6
	},
};

local Deadmines = t_dungeons[36];

local _losTbl = Encounter_MakeLOSTbl()
	-- Caves
	.new 'OpeningRoomC' {-18.4205, -383.992, 62.1955} {-8.90474, -374.840, 61.5301}
	.new 'SecondRoomC_' {-87.8975, -381.370, 59.1348} {-71.5840, -379.585, 54.4856}
	.new 'PrebossCave_' {-128.787, -393.565, 59.0852} {-115.726, -394.360, 56.6411}
	.new 'PostBossCRHS' {-191.476, -483.862, 54.0488} {-188.611, -468.184, 54.1125}
	.new 'MechanicBoss' {232.9750, -484.876, 48.8318} {-217.429, -497.891, 49.3394}
	.new 'FoundryRoom_' {-190.821, -601.113, 35.7502} {-179.864, -587.877, 42.5492}
	-- Docks
	.new 'PortEntrance' {-98.8583, -677.626, 7.42216} {-103.519, -654.130, 7.42245}
	.new 'FirstFloorBt' {-123.771, -794.530, 16.8960} {-101.443, -792.455, 17.0484}
	.new 'SecndFloorBt' {-104.340, -793.528, 28.1267} {-80.4388, -782.016, 26.5325}
	.new 'Greenskin___' {-49.1191, -791.077, 38.7539} {-74.5607, -790.036, 39.0189}
.endtbl();

local _areaTbl = Encounter_MakeAreaTbl(_losTbl)
	-- Caves
	.new ('OpeningRoomC', SHAPE_POLYGON) {-73.9446, -428.245} {-70.2316, -358.670} {-10.0404, -353.354} {-13.0921, -398.678} ('OpeningRoomC', 53.00, 100)
	.new ('SecondRoomC_', SHAPE_POLYGON) {-82.4100, -369.000} {-137.097, -369.000} {-137.097, -455.000} {-82.4200, -455.000} ('SecondRoomC_', 53.00, 100)
	.new ('PrebossCave_', SHAPE_POLYGON) {-188.039, -416.542} {-143.717, -426.965} {-135.048, -396.889} {-173.248, -382.392} ('PrebossCave_', 53.00, 100)
	.new ('PostBossCRHS', SHAPE_POLYGON) {-198.621, -489.932} {-251.358, -450.466} {-251.789, -502.347} {-193.880, -540.333} ('PostBossCRHS', 54.04, 100)
	.new ('MechanicBoss', SHAPE_POLYGON) {-260.901, -472.995} {-254.855, -534.344} {-329.749, -537.770} {-314.639, -474.441} ('MechanicBoss', 49.14, 100)
	.new ('FoundryRoom_', SHAPE_POLYGON) {-167.824, -516.641} {-241.216, -550.845} {-238.709, -618.695} {-174.075, -617.724} ('FoundryRoom_', 19.30, 3)
	-- Docks
	.new ('PortEntrance', SHAPE_POLYGON) {-89.2530, -734.702} {-5.37874, -762.941} {26.87210, -706.747} {-80.4528, -709.448} ('PortEntrance', 7.422, 15)
	.new ('FirstFloorBt', SHAPE_POLYGON) {-69.9956, -762.040} {-120.421, -793.199} {-103.797, -804.116} {-64.4100, -792.811} ('FirstFloorBt', 26.70, 4)
	.new ('SecndFloorBt', SHAPE_POLYGON) {-39.4872, -811.047} {-13.9543, -779.885} {-88.7290, -779.874} {-82.7612, -801.644} ('SecndFloorBt', 38.50, 2)
	.new ('Greenskin___', SHAPE_POLYGON)
		{-53.7663, -802.945} {-54.6823, -837.398} {-111.748, -846.163}
		{-106.866, -812.355} {-89.1969, -805.287} {-66.7444, -801.137}
		('Greenskin___', 40.60, 4)
.endtbl();

local NPC_RANGED_LIST = Encounter_NewRangedList();
function NPC_RANGED_LIST.IsRanged() return true; end

Deadmines.encounters = {
	{name = "Rhahk'Zor"},
	{name = "Sneed's Shredder", fear = true},
	{name = "Gilnid"},
	{name = "Mr. Smite"},
	-- {name = "Captain Greenskin"},
	{name = "Edwin VanCleef", tpos = {-64.3071, -817.962, 41.1451}},
	-- {name = "Cookie"},
	{
		name               = "Global",
		test               = function() return true; end,
		UseLosBreakForPull = true,
		noboss             = true,
	},
};

Deadmines.encounters.LosTbl    = _losTbl;
Deadmines.encounters.AreaTbl   = _areaTbl;
Deadmines.encounters.RangedTbl = NPC_RANGED_LIST;
